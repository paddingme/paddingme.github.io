--- 
wordpress_id: 14
title: Hoisting Grails to Your Legacy DB
wordpress_url: http://jasonrudolph.com/blog/2006/06/20/hoisting-grails-to-your-legacy-db/
layout: post
tags:
- grails
- groovy
- java	
---
<p>[Update 2007-07-21] - To try out a working sample application using a legacy schema with a more recent version of Grails, check out <a href="http://jasonrudolph.com/blog/2007/07/21/groking-gorm-part-2-no-schema-left-behind/">this post</a>  from the &quot;Grokking GORM&quot; series.<br /> </p> <p>--&nbsp;</p> <p>So you&#39;ve heard about <a href="http://grails.org/">Grails</a> and its promise to bring the power of <a href="http://www.rubyonrails.org/">Ruby on Rails</a> to the Java platform.  If you&#39;re like me, you stand in pure awe of the innovation and power illustrated by Rails, but know that your organization just isn&#39;t going to stray from the safety of Java.  So if we can achieve similar productivity with a more Java-centric solution, what&#39;s not to like?  And the more conservative businesses should find additional comfort knowing that Grails applications play nicely with their existing Java code, because Grails applications are written in <a href="http://groovy.codehaus.org/">Groovy</a> (a dynamically-typed scripting language that also happens to be a <a href="http://www.jcp.org/en/jsr/detail?id=241">Java standard</a>).</p> <p>Grails is still in its infancy (with version 0.1 being the current stable release), but it&#39;s slam-packed with many more features than you might expect given its youth, and I expect it to mature rapidly over the next few months.  The development team has established an aggressive <a href="http://grails.org/Roadmap">road map</a> to continue to progress Grails as a solid and rich web development framework.</p> <p>That all sounds good, but will it work with your legacy databases?  If you&#39;re familiar with Rails, you know that its <em>convention over configuration</em> approach (which Grails shares) is best suited to greenfield applications where the database schema can be defined to follow the preferred conventions.  Shoehorning a legacy database into such a framework, while it can be done, takes away some of that feeling of elegance you get from working with a purely-conforming schema.  That said, I was surprised by how little tweaking is required to wrap Grails around a non-conforming legacy schema.  Care to see for yourself?  Let&#39;s get started&hellip;<!</p> <h2>Step 0 - Dust off that Database</h2> <p>First we&#39;ll make sure you have a database server to host that aging schema of yours.  While Grails works with <a href="http://grails.org/Configuration">most databases</a>, we&#39;ll use MySQL for this example.  (We can&#39;t really call this Step 1, can we?  After all, this database has been sitting around gathering dust forever, or at least since before you heard about Grails.)</p> <ol> 	<li>Grab the current version of the 5.0.x <a href="http://dev.mysql.com/downloads/mysql/5.0.html">MySQL Windows Installer</a>.  (I&#39;m using Windows Essentials(x86) 5.0.22.)</li> 	<li>Run the installer, and continue to take all default settings until you&#39;re prompted to sign up for a MySQL.com account.</li> <p><a href="/resources/200606182018.jpg"><img src="/resources/200606182018-tm.jpg" alt="200606182018" width="130" height="100" /></a> <a href="/resources/200606182019.jpg"><img src="/resources/200606182019-tm.jpg" alt="200606182019" width="130" height="100" /></a> <a href="/resources/200606182019-1.jpg"><img src="/resources/200606182019-1-tm.jpg" alt="200606182019-1" width="130" height="100" /></a></p> 	<li>We can safely punt here.  Select <strong>Skip Sign-Up</strong> and click <strong>Next</strong>.</li> <p><a href="/resources/200606182019-2.jpg"><img src="/resources/200606182019-2-tm.jpg" alt="200606182019-2" width="130" height="100" /></a></p> 	<li>Click <strong>Finish</strong> to complete the installation and bring up the configuration wizard.</li> <p><a href="/resources/200606182020.jpg"><img src="/resources/200606182020-tm.jpg" alt="200606182020" width="130" height="100" /></a></p> 	<li>Click <strong>Next</strong> until you get to the security section.</li> <p><a href="/resources/200606182023.jpg"><img src="/resources/200606182023-tm.jpg" alt="200606182023" width="130" height="100" /></a> <a href="/resources/200606182023-1.jpg"><img src="/resources/200606182023-1-tm.jpg" alt="200606182023-1" width="130" height="100" /></a> <a href="/resources/200606182024.jpg"><img src="/resources/200606182024-tm.jpg" alt="200606182024" width="130" height="100" /></a><br /> <a href="/resources/200606182024-1.jpg"><img src="/resources/200606182024-1-tm.jpg" alt="200606182024-1" width="130" height="100" /></a> <a href="/resources/200606182024-2.jpg"><img src="/resources/200606182024-2-tm.jpg" alt="200606182024-2" width="130" height="100" /></a> <a href="/resources/200606182024-3.jpg"><img src="/resources/200606182024-3-tm.jpg" alt="200606182024-3" width="130" height="100" /></a><br /> <a href="/resources/200606182024-4.jpg"><img src="/resources/200606182024-4-tm.jpg" alt="200606182024-4" width="130" height="100" /></a> <a href="/resources/200606182024-5.jpg"><img src="/resources/200606182024-5-tm.jpg" alt="200606182024-5" width="130" height="100" /></a> <a href="/resources/200606182024-6.jpg"><img src="/resources/200606182024-6-tm.jpg" alt="200606182024-6" width="130" height="100" /></a></p> 	<li>Enter the password you&#39;ll use to connect to the database, and click <strong>Next</strong>.  (Keep this password handy, because we&#39;ll need it again in a moment.)</li> <p><a href="/resources/200606182024-7.jpg"><img src="/resources/200606182024-7-tm.jpg" alt="200606182024-7" width="130" height="100" /></a></p> 	<li>Continue through the last few screens to complete the configuration and start the MySQL server.</li> <p><a href="/resources/200606182027.jpg"><img src="/resources/200606182027-tm.jpg" alt="200606182027" width="130" height="100" /></a> <a href="/resources/200606182027-1.jpg"><img src="/resources/200606182027-1-tm.jpg" alt="200606182027-1" width="130" height="100" /></a></p> 	<li>Open the MySQL Command Line Client.  (You can find it in <strong>Start--&gt;Programs--&gt;MySQL MySQL Server 5.0--&gt;MySQL Command Line Client</strong>.)</li> <p><a href="/resources/200606182035.jpg"><img src="/resources/200606182035-tm.jpg" alt="200606182035" width="536" height="282" /></a></p> 	<li>Paste the contents of this <a href="http://jasonrudolph.com/resources/20060620/grailstutorial.sql">file</a>    into your console to create and populate your database.</li> <p><a href="/resources/200606182037.jpg"><img src="/resources/200606182037-tm.jpg" alt="200606182037" width="537" height="276" /></a></p> 	<li>Now let&#39;s check out our data model and the data we have to work with.</li><br /> <ol> 	<li>Enter the queries shown below to verify that your first table is intact and populated.  As you can see, our simple (but non-conforming) legacy database houses a list of employees each uniquely identified by an employee ID.</li> <p><a href="/resources/200606182041.jpg"><img src="/resources/200606182041-tm.jpg" alt="200606182041" width="537" height="273" /></a></p> <p>How does this table deviate from what the Grails convention expects?  It&#39;s all in a name.  First, Grails expects each table to have a single column named &quot;<strong>id</strong>&quot; that represents the primary key.  Secondly, Grails prefers that the primary key have no business meaning, whereas the data in this table&#39;s <strong>employee_id</strong> column most likely does have business meaning.  We&#39;ll discuss the workaround shortly.</p> 	<li>Then enter the queries shown below to verify that your other table is intact and populated.  Notice that the database stores a list of computers and the employee to which the computer is assigned (if any).  (For some reason, nobody wants the Tandy.)</li> <p><a href="/resources/200606182041-1.jpg"><img src="/resources/200606182041-1-tm.jpg" alt="200606182041-1" width="537" height="273" /></a></p> <p>And what&#39;s wrong with this table?  Well, it suffers from the same problems discussed for the <strong>employees</strong> table, and then one more issue.  Since this table stores computers, we likely want to define a domain model named Computer represent the data in this table.  However, by default Grails tries to map each domain class to a table will the corresponding pluralized name - in this case, &quot;<strong>computers</strong>&quot;, not &quot;<strong>computer_management</strong>&quot;.  We&#39;ll handle this customization as well.</p> </ol> </ol> <h2><!--nextpage--></h2> <h2>Step 1 - Install Grails</h2> <p>Follow these <a href="http://grails.org/Installation">steps</a> to download and install grails.  (As of this writing, Grails 0.1 is the current stable release.  So we&#39;ll stick with 0.1 for now.)</p> <h2>Step 2 - Hello, Grails!</h2> <ol> 	<li>Now that we have Grails installed, let&#39;s create a directory for our Grails applications.  You can call it whatever you like, and place it wherever you prefer.</li> <p><a href="/resources/200606182044.jpg"><img src="/resources/200606182044-tm.jpg" alt="200606182044" width="537" height="273" /></a></p> 	<li>From within the directory we just created, let&#39;s generate our project structure.  Enter <strong>grails create-app</strong>   and hit <strong>Enter</strong>.</li> 	<li>When prompted for an application name, type <strong><span>grailstutorial</span></strong> and hit <strong>Enter</strong>.</li> <p><a href="/resources/200606182049.jpg"><img src="/resources/200606182049-tm.jpg" alt="200606182049" width="539" height="274" /></a></p> 	<li>Grails should declare a successful build, and we&#39;re ready to configure our database properties.  (If you&#39;re curious, <a href="http://grails.org/">grails.org</a> offers a <a href="http://grails.org/Quick+Start">good overview</a> of the project structure that Grails uses for its applications.)</li> <p><a href="/resources/200606182049-1.jpg"><img src="/resources/200606182049-1-tm.jpg" alt="200606182049-1" width="536" height="272" /></a></p> 	<li>Grails comes pre-packaged with HSQLDB, but since we&#39;re using MySQL, we have a few quick steps to tell Grails how to talk to our database.  First, download the Java MySQL driver from <a href="http://www.mysql.com/products/connector/j/">http://www.mysql.com/products/connector/j/</a>.  I opted for the current production-ready version which, as of this writing, is 3.1.13.</li> 	<li>Open the zip file and extract the <strong><span>mysql-connector-java-3.1.13-bin.jar</span></strong> file into the <strong><span>lib</span></strong> directory of your Grails application.  (Please note that the exact name of the JAR file may differ based on the version of the driver you downloaded.  No worries.)</li> <p><a href="/resources/200606182051.jpg"><img src="/resources/200606182051-tm.jpg" alt="200606182051" width="538" height="273" /></a></p> 	<li>Now we&#39;re ready to tell Grails where to find our database.  Open <strong><span>ApplicationDataSource.groovy</span></strong> in your editor of choice and modify it to match the settings below.  You&#39;ll find this file in <strong><span>C:\grails_apps\grailstutorial\grails-app\conf</span></strong>.</li> <p><pre>class ApplicationDataSource {<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property boolean pooled = true<br /> <font color="#006600"> &nbsp;&nbsp;&nbsp;&nbsp;//@Property String dbCreate = &quot;create-drop&quot;</font><br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property String url = &quot;jdbc:mysql://localhost/grailstutorial&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property String driverClassName = &quot;com.mysql.jdbc.Driver&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property String username = &quot;root&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property String password = &quot;password&quot;<br /> }</pre></p> <p>Note that we commented out the <strong><span>dbCreate</span></strong> property.  Valid values for this optional property are <span>&quot;<strong>create</strong>&quot;</span>, <span>&quot;<strong>create-drop</strong>&quot;</span>, or <span>&quot;<strong>update</strong>&quot;</span>.  These values all instruct Grails to alter your database schema (in one way or another) at runtime to synchronize it with your domain classes.  Since we&#39;re dealing with a legacy database here, we&#39;ll assume that we&#39;re forbidden from modifying the table structure.  So, by commenting out this property, we&#39;re instructing Grails to leave the schema as is.</p> 	<li>Alright, let&#39;s test.  From within your application directory (<strong><span>C:\grails_apps\grailstutorial</span></strong>), type <strong><span>grails run-app</span></strong> and hit <strong>Enter</strong>.</li> 	<li>The application is now waiting to respond to your requests at <a href="http://localhost:8080/grailstutorial/">http://localhost:8080/grailstutorial/</a>.</li> <p><a href="/resources/200606271915.jpg"> <img src="/resources/200606271915.jpg" alt="200606271915" width="533" height="330" /> </a></p> <p>[UPDATED: June 27th, 2006: This screen shot has been corrected to reflect what you should see at this point.&nbsp; Thanks to Rob Kainz for pointing out the problem with the screen shot formerly shown here.&nbsp; That screen shot incorrectly included a link to the <strong>EmployeeController,</strong> which will not be present until we generate the controller in an upcoming step.]</p> <p>OK.  So, admittedly this isn&#39;t particularly exciting.  Before we see any real functionality, we first need to create our domain<br /> model and generate UI components to manage our model.</p> <p>We just wanted to make sure everything&#39;s working so far.  (You didn&#39;t want to build the application end-to-end before you tested it, did you?)</p> </ol> <p><!--Begin Hoisting 2--></p> <h2><!--nextpage--></h2> <h2>Step 3 - Mastering Your Domain</h2> <p>Recall that Grails favors <em>convention over configuration</em>.  Well, the Grails convention gives precedence to your domain model over the database schema.  In a greenfield application, we could start with no tables at all and just define our domain classes in Grails.  Grails would then generate the database tables for us based on our domain model.Since we&#39;re working with a legacy database, we don&#39;t fit quite as nicely into the standard Grails convention.  So this is where some configuration comes into play.</p> <ol> 	<li>If you&#39;re application is still running, hit <strong>Ctrl-C</strong> in the Command Prompt window to stop your application.</li> 	<li>Now let&#39;s generate the domain class that will correspond to our <strong>employees</strong> table.  From within your application directory (<strong><span>C:\grails_apps\grailstutorial</span></strong>), type grails <strong>create-domain-class</strong> and hit <strong>Enter</strong>.</li> 	<li>When prompted for the name of your domain class, type <strong><span>Employee</span></strong> and hit <strong>Enter</strong>.</li> <p><a href="/resources/200606182158.jpg"><img src="/resources/200606182158-tm.jpg" alt="200606182158" width="526" height="267" /></a></p> 	<li>Grails generated the following class for us, but we need to tweak it to work with our legacy database structure.</li> <p><pre> class Employee {<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property Long id<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property Long version<br /> &nbsp;&nbsp;&nbsp;&nbsp;String toString() { &quot;${this.class.name} :  $id&quot; }<br /> }</pre></p> <p>It&#39;s important to note that the next two steps (steps 6 and 7) are only required because the employees table doesn&#39;t conform to the expected convention.    Even though these steps are fairly quick to get through, know that if our table followed the standard convention, Grails would automatically infer all the information that we&#39;ll explicitly state in these next two steps.</p> 	<li>Update the class to match the code shown below.</li> <ol> 	<li>Note that we changed the data type of the id attribute from <code>Long</code> to <code>String</code>.  Recall from earlier that the standard Grails convention expects the unique identifier for your domain objects to be a database-generated numeric value (i.e. a surrogate key).  However, our legacy database uses a primary key that has actual business meaning (i.e. the employee&#39;s textual user ID).</li> 	<li>Note also that we removed the <code>version</code> attribute.  Grails also prefers that your table have a column for capturing the version number for each object.  (This preference is actually a product of Hibernate, which provides the underlying persistence framework for Grails.)  Our legacy table does not have this attribute, so we must remove it from our model.</li> <p><pre> class Employee {<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property String id<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property String firstName<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property String lastName<br /> &nbsp;&nbsp;&nbsp;&nbsp;@Property Date startDate<br /> &nbsp;&nbsp;&nbsp;&nbsp;String toString() { &quot;${this.class.name} :  $id&quot; }<br /> }</pre></p> </ol> 	<li>There&#39;s just one more bit of configuration we have to face in order to get Grails to cooperate with our database model.</li> <p>Because we deviate from the default convention, we need to tell Grails how to map the database columns to our domain model (and vice versa).</p> <ol> 	<li>Save this <a href="http://jasonrudolph.com/resources/20060620/hibernate.cfg.xml">file</a>   as <strong><span>hibernate.cfg.xml</span></strong> and place it in the <strong>hibernate</strong> folder (<strong><span>C:\grails_apps\grailstutorial\hibernate</span></strong>) of your application.  Most of its parameters mimic the default values you&#39;d get with Grails out-of-the-box.  The important entry to note is the <code>mapping</code> entry.  This particular mapping entry tells Grails (well, Hibernate) that it needs to look at our custom mapping configuration in <strong><span>Employee.hbm.xml</span></strong>.</li> 	<li>Save this <a href="http://jasonrudolph.com/resources/20060620/Employee.hbm.xml">file</a>    as <strong><span>Employee.hbm.xml</span></strong> and place it in the <strong>hibernate</strong> folder (<strong><span>C:\grails_apps\grailstutorial\hibernate</span></strong>) of your application.  Again, <em>most</em> of its parameters mimic the default values that Grails provides out-of-the-box.&nbsp; Lets have a closer look at this file.</li> <p>The Grails convention expects our primary key to be named &ldquo;<strong>id</strong>&rdquo;.  If our primary key was named &ldquo;<strong>id</strong>&rdquo;., then none of this XML configuration would be necessary.</p> <p>Since our actual primary key is named &ldquo;<strong>employee_id</strong>&rdquo;, we need to explicitly map the database columns to our domain model.</p> <p>Also note that since our primary key has business meaning (i.e. it&#39;s not an ID generated by the database), we need to inform Grails that the application logic will bear responsibility for assigning the value to the <strong>id</strong> column.  We do so with the generator tag (<strong>&lt;generator class=&quot;assigned&quot;/&gt;</strong>).</p> <code> </code></ol> 	<li>We&#39;ve got our domain model taken care of, and we need to tell Grails to generate its UI scaffolding.  From within your application directory (<strong><span>C:\grails_apps\grailstutorial</span></strong>), type <strong><span>grails generate-all</span></strong> and hit <strong>Enter</strong>.</li> 	<li>When prompted for the name of your domain class, type <strong><span>Employee</span></strong> and hit <strong>Enter</strong>.</li> <p><a href="/resources/200606182218.jpg"><img src="/resources/200606182218-tm.jpg" alt="200606182218" width="525" height="267" /></a></p> 	<li>Grails has now created the UI components to provide all CRUD (i.e. Create, Read, Update, and Delete) functionality for the <strong>employees</strong> table.  It&#39;s time to test again.  From within your application directory (<strong><span>C:\grails_apps\grailstutorial</span></strong>), type <strong><span>grails run-app</span></strong> and hit <strong>Enter</strong>.  You should once again see the application start successfully.</li> 	<li>Open a browser and navigate to <a href="http://localhost:8080/grailstutorial/">http://localhost:8080/grailstutorial/</a>.</li> <p><a href="/resources/200606182220.jpg"><img src="/resources/200606182220-tm.jpg" alt="200606182220" width="525" height="302" /></a></p> 	<li>Grails conveniently displays all controllers associated with the application.  (Of course you&#39;d replace this page with your own starting page before deploying your production application, but this feature is nevertheless great for getting started.)  Click on the link to the <strong>EmployeeController</strong>.</li> 	<li>We&#39;re first presented with a list of all employees.  (Try not to get too hung up on the look-and-feel of the application at this point.  What&#39;s important to notice is just how quickly we&#39;ve built to a functioning application.  This look-and-feel can easily be and is frankly intended to be replaced/modified to fit your needs.  If you need to sit down with a client to quickly prototype an application, this scaffolding can ease that process greatly.  Best of all, you can then grow your prototype into your real application...instead of having to throw your prototype away and start the real application from scratch.)</li> <p><a href="/resources/200606182222.jpg"><img src="/resources/200606182222-tm.jpg" alt="200606182222" width="524" height="345" /></a></p> 	<li>For starters, let&#39;s click on one of the <strong>Show</strong> links to see the details for a particular employee.</li> <p><a href="/resources/200606182225.jpg"><img src="/resources/200606182225-tm.jpg" alt="200606182225" width="525" height="338" /></a></p> 	<li>From here, let&#39;s edit this entry.</li> <p><a href="/resources/200606182226.jpg"><img src="/resources/200606182226-tm.jpg" alt="200606182226" width="525" height="345" /></a></p> 	<li>So here&#39;s at least one thing we&#39;ll want to customize.  Our <strong>Start Date</strong> field also allows the user to edit the time (i.e. hour and minute), but we really only want to capture the date.  Since the <code>startDate</code> member in the <code>Employee</code> class is of type <code>java.util.Date</code> (which of course contains a full timestamp down to the millisecond), Grails has <strike>know</strike> no way of knowing that we only care about the year, month, and day.  So, let&#39;s make a note that this is something we&#39;ll want to tweak.</li> <p><!-- Begin Hositing 3 --></p> 	<li>To complete our test of the edit functionality, let&#39;s change this employee&#39;s first name from &lsquo;Jon&#39; to &lsquo;Bob&#39; and click <strong>Update</strong>.</li> <p><a href="/resources/200606182228.jpg"><img src="/resources/200606182228-tm.jpg" alt="200606182228" width="525" height="345" /></a></p> 	<li>Now let&#39;s try out the delete functionality.  Go ahead and click <strong>Delete</strong>.</li> <p><a href="/resources/200606182230.jpg"><img src="/resources/200606182230-tm.jpg" alt="200606182230" width="528" height="348" /></a></p> 	<li>Well, that was easy.  Perhaps a bit too easy, don&#39;t you think?  We should probably ask the user first before actually deleting good ol&#39; Bob Smith.  Let&#39;s make a note to come back here and add a simple &lsquo;Are You Sure&#39; prompt before deleting an employee.</li> 	<li>We have one bit of CRUD left to try out.  Click on <strong>New Employee</strong> and let&#39;s add back our buddy Bob.</li> <p><a href="/resources/200606182231.jpg"><img src="/resources/200606182231-tm.jpg" alt="200606182231" width="525" height="346" /></a></p> 	<li>Fill in Bob&#39;s data and click <strong>Create</strong>.</li> <p><img src="/resources/200606182231-1.jpg" /></p> 	<li>Whoa!  That&#39;s not what we wanted.  What happened?  Did you notice that we weren&#39;t asked to specify an employee ID for the new employee.  When we were configuring the Hibernate mapping files, we mentioned that the application logic (not the database) will bear responsibility for assigning a unique ID to each employee.  The Grails convention prefers that the unique ID be generated behind the scenes, but since our ID has business meaning (perhaps as a user&#39;s LAN ID), we need to allow the user to explicitly specify the employee ID.</li> <p>Because our database design deviates from the standard convention, we need to make a slight adjustment to the UI that Grails generated for adding a new employee.  Open up the <strong><span>create.gsp</span></strong> file in your editor of choice and add a field for the employee ID.  You&#39;ll find this file in <strong><span>C:\grails_apps\grailstutorial\grails-app\views\employee\create.gsp</span></strong>.&nbsp;<br /> </p> <p>Here&#39;s the content we need to add, and the file should look like <a href="http://jasonrudolph.com/resources/20060620/create.gsp">this</a>   when you&#39;re done.</p> <pre>&nbsp; &lt;tr class=&#39;prop&#39;&gt;<br /> &nbsp; &nbsp; &lt;td valign=&#39;top&#39; style=&#39;text-align:left;&#39; width=&#39;20%&#39;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for=&#39;id&#39;&gt;ID:&lt;/label&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp; &lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;td valign=&#39;top&#39; style=&#39;text-align:left;&#39; width=&#39;80%&#39;<br /> &nbsp; &nbsp; &nbsp; class=&#39;${hasErrors(bean:employee,field:&#39;id&#39;,&#39;errors&#39;)}&#39;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&#39;text&#39; name=&#39;id&#39; value=&#39;${employee?.id}&#39; /&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;/td&gt;<br /> &nbsp; &lt;/tr&gt;<br /></pre> 	<li>Save the changes to <strong><span>create.gsp</span></strong>, and let&#39;s try to add an employee again.</li> 	<li>Point your browser to <a href="http://localhost:8080/grailstutorial/employee/create">http://localhost:8080/grailstutorial/employee/create</a>.  We&#39;re now prompted for an employee ID as well.</li> <p><a href="/resources/200606182239.jpg"><img src="/resources/200606182239-tm.jpg" alt="200606182239" width="527" height="323" /></a></p> 	<li>Fill in Bob&#39;s data and click <strong>Create</strong>.</li> <p><a href="/resources/200606182241.jpg"><img src="/resources/200606182241-tm.jpg" alt="200606182241" width="524" height="322" /></a></p> 	<li>Success!</li> </ol> <h2>Summary</h2> <p>So, let&#39;s review what we had to do over and above the standard Grails steps in order to get our non-conforming schema to work with Grails.  We had to...</p> <ol> 	<li>Remove the default attributes from our domain class (since our table did not include a database-generated <strong>id</strong> column or a <strong>version</strong> column).</li> 	<li>Add Hibernate mapping files to map the attributes of our <code>Employee</code> class to the columns of our <strong>employees</strong> table.</li> 	<li>Modify <strong><span>create.gsp</span></strong> to allow the user to specify the employee ID when adding a new employee.</li> </ol> <h2>Next Steps</h2> <p>We can now manage our <strong>employees</strong> table, but we still need to add support for the <strong>computers</strong> table.  And since there&#39;s a relationship between employees and computers, we&#39;ll want to make sure our UI can manage that relationship as well.  We&#39;ll add that functionality in a future session.   In the mean time, there were a few things we noted that we wanted to clean up. Shall we consider this an extra credit assignment?</p> <ol> 	<li>We can make the delete functionality a bit more friendly by providing a simple <em>&ldquo;Are You Sure&rdquo;</em> prompt to the user before deleting an employee.</li> 	<li>In the UI for creating and editing an employee, the <strong>Start Date</strong> field includes input for the hour and minute.  We only want the year, month, and day.</li> </ol> <p>Pretty straightforward, right?&nbsp; For even more usability enhancements, we should also...</p> <ol> 	<li>Add some validation to make sure we have data for all required fields, and that the data is of the appropriate type and size to be safely persisted to the database.  (For example, we need to make sure that an employee ID does not exceed the maximum length allowed by the <strong>employee_id</strong> column.)</li> 	<li>Add some simple confirmation messages after we successfully create, update, or delete an employee.  (Hint:  if you know how this is accomplished in Ruby on Rails, then you&#39;re almost done with this enhancement already.)</li> </ol> <h2>Useful Links</h2> <ul> 	<li>Grails User Guide - <a href="http://grails.org/User+Guide">http://grails.org/User+Guide</a></li> 	<li>Grails User Mailing List Archive - <a href="http://www.nabble.com/grails---user-f11861.html">http://www.nabble.com/grails---user-f11861.html</a></li> 	<li>Groovy Home Page - <a href="http://groovy.codehaus.org/">http://groovy.codehaus.org/</a><br /> </li> </ul>
